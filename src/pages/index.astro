---
import PageLayout from '../layouts/BaseLayout.astro'
import Section from '../components/Section.astro'
import Card from '../components/Card.astro'
import ProjectCard from '../components/ProjectCard.astro'
import Label from '../components/Label.astro'
import SkillLayout from '../components/SkillLayout.astro'
import PostPreview from '@/components/blog/PostPreview.astro'

import { Image } from 'astro:assets'
import astro from '../assets/else-where.png'

import { sortMDByDate } from '@/utils'
import { fetchTistoryTopPosts } from '../utils/post'

const languages = ['java', 'kotlin', 'python', 'sql']
const frontend = ['typescript', 'tauri']
const backend = ['spring-boot', 'spring-batch', 'jpa']
const others = ['airflow', 'kubernetes', 'docker', 'postgres', 'valkey', 'git', 'ci/cd', 'datadog', 'aws', 'self-hosted']

const MAX_POSTS = 10
const tistoryPosts = await fetchTistoryTopPosts()
const allPostsByDate = sortMDByDate(tistoryPosts).slice(0, MAX_POSTS)
---

<PageLayout meta={{ title: 'Home' }}>
	<div class='flex w-full flex-col gap-y-10'>
		<section class='flex flex-col items-center gap-y-7'>
			<Image
				src={astro}
				alt='profile photo'
				class='h-36 w-auto rounded-full'
				loading='eager'
			/>

			<div class='flex flex-col items-center gap-y-4'>
				<h1 class='text-3xl font-bold'>백엔드 개발자 고형규입니다.</h1>
				<a
					href='https://github.com/GHGHGHKO/resume'
					class='flex flex-row items-center gap-x-3 rounded-3xl border border-input px-4 py-2 text-sm shadow-sm transition-all hover:shadow-md'
				>
					<span class='relative flex items-center justify-center'>
						<span
							class='absolute inline-flex h-2 w-2 animate-ping rounded-full border border-green-400 bg-green-400 opacity-75'
						></span>
						<span class='relative inline-flex h-2 w-2 rounded-full bg-green-400'></span>
					</span>

					<p class='font-medium'>Get free forked template</p>
				</a>
				<div class='flex flex-wrap justify-center gap-x-7 gap-y-3'>
					<Label title='GS 리테일'>
						<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' class='h-5 w-5' slot='icon'
						><path
							fill='currentColor'
							d='M4.615 20q-.69 0-1.152-.462Q3 19.075 3 18.385v-9.77q0-.69.463-1.152Q3.925 7 4.615 7H9V5.615q0-.69.463-1.152Q9.925 4 10.615 4h2.77q.69 0 1.153.463q.462.462.462 1.152V7h4.385q.69 0 1.152.463q.463.462.463 1.152v9.77q0 .69-.462 1.152q-.463.463-1.153.463zm0-1h14.77q.23 0 .423-.192q.192-.193.192-.423v-9.77q0-.23-.192-.423Q19.615 8 19.385 8H4.615q-.23 0-.423.192Q4 8.385 4 8.615v9.77q0 .23.192.423q.193.192.423.192M10 7h4V5.615q0-.23-.192-.423Q13.615 5 13.385 5h-2.77q-.23 0-.423.192q-.192.193-.192.423zM4 19V8z'
						></path></svg
						>
					</Label>
					<Label title='서울'>
						<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' class='h-5 w-5' slot='icon'
						><path
							fill='currentColor'
							d='M12.003 11.73q.668 0 1.14-.475q.472-.475.472-1.143t-.475-1.14q-.476-.472-1.143-.472t-1.14.476q-.472.475-.472 1.143t.475 1.14q.476.472 1.143.472M12 19.677q2.82-2.454 4.458-4.991q1.638-2.538 1.638-4.39q0-2.744-1.737-4.53T12 3.981q-2.621 0-4.359 1.785t-1.737 4.53q0 1.852 1.638 4.39q1.639 2.537 4.458 4.99m0 1.343q-3.525-3.117-5.31-5.814q-1.786-2.697-1.786-4.909q0-3.173 2.066-5.234Q9.037 3 12 3t5.03 2.062q2.066 2.061 2.066 5.234q0 2.212-1.785 4.909q-1.786 2.697-5.311 5.814m0-10.904'
						></path></svg
						>
					</Label>
					<Label
						title='GitHub'
						as='a'
						href='https://github.com/GHGHGHKO'
						target='_blank'>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							viewBox="0 0 16 16"
							slot="icon"
							class="h-5 w-5 text-foreground/75">
							<path
								fill="currentColor"
								d="M8 0C3.58 0 0 3.58 0 8a8 8 0 0 0 5.47 7.59c.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13 -.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07 -1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82a7.548 7.548 0 0 1 2-.27c.68.003 1.36.092 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.001 8.001 0 0 0 16 8 c0-4.42-3.58-8-8-8z"
							></path>
						</svg>
					</Label>
					<Label title='gudrb963@gmail.com'>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							viewBox="0 0 24 24"
							slot="icon"
							class="h-5 w-5 text-foreground/75"
						>
							<path
								fill="currentColor"
								d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 2v.01L12 13 4 6.01V6h16zM4 18V8l8 5 8-5v10H4z"
							/>
						</svg>
					</Label>
				</div>
			</div>
		</section>

		<Section title='About'>
			<p class='text-muted-foreground'>
				최선을 고민하는 5년차 백엔드 개발자 고형규입니다.<br/>
				21년도에 창업 실패로 비즈니스와 개발의 필요성을 느낀 뒤, 현재 개발은 직업을 넘어 취미를 붙인 상태입니다.
				지금은 GS리테일에서 편의점 택배(국내택배, 반값택배)를 운영, 개발하고 있습니다.
				공식 문서와 best practices를 활용하여 개발합니다.
				과하지 않은 Clean code 그리고 서비스와 규모에 맞게 적정 기술을 사용하는 걸 좋아합니다.
			</p>
		</Section>
		{
			allPostsByDate.length > 0 && (
				<Section title='Posts'>
					<ul class='flex flex-col gap-y-2'>
						{allPostsByDate.map((p) => (
							<li class='flex flex-col gap-x-2 sm:flex-row'>
								<PostPreview post={p} />
							</li>
						))}
					</ul>
				</Section>
			)
		}

		<Section title='Experience'>
			<Card
				heading='GS 리테일'
				subheading='물류DX | 매니저 | 백엔드'
				date='Oct 2022 - Now'
				imagePath='/src/assets/logo_gs_lg-removebg-preview.png'
				altText='Lorem, ipsum dolor sit'
				imageClass='h-12 w-auto md:-left-28'
			>
				<ul class='ml-4 list-disc text-muted-foreground'>
					<li>택배 시스템 개발 및 운영</li>
					<li>대한통운, 네이버, 토스, 당근 등 40개의 제휴사 담당 및 신규 제휴</li>
					<li>편의점 택배 웹 백엔드를 우리동네GS 이관 프로젝트 수행</li>
					<li>EDB - Aurora PostgreSQL ANSI SQL migration</li>
					<li>Datadog 로그 수집 적용 및 개인정보 핸들링하여 로그 보안 강화</li>
					<li>Onprem airflow - MWAA migration (배치 오류 80% 절감)</li>
					<li>DB EAI 제거</li>
				</ul>
			</Card>
			<Card
				heading='GS 네트웍스'
				subheading='Sit amet consectetur'
				date='Aug 2021 - Oct 2022'
				imagePath='/src/assets/logo_gs_lg-removebg-preview.png'
				altText='Lorem, ipsum dolor sit'
				imageClass='h-12 w-auto md:-left-28'
			>
				<ul class='ml-4 list-disc text-muted-foreground'>
					<li>택배 시스템 개발 및 운영</li>
					<li>대한통운, 네이버, 토스, 당근 등 40개의 제휴사 담당 및 신규 제휴</li>
					<li>Airflow 학습하여 onprem k8s 기반의 Airflow 운영</li>
					<li>IDC to IDC 차세대 프로젝트 오픈 경험</li>
					<li>flashback 쿼리를 사용하여 장애 해결 경험</li>
					<li>배송조회 API 개선 (70% 오류 감소로 오류 탐지 복잡도 개선)</li>
				</ul>
			</Card>
		</Section>

		<Section title='Education'>
			<Card
				heading='Lorem Ipsum'
				subheading='Sit amet consectetur'
				date='Dec 2022 - Nov 2023'
				imagePath='/src/assets/about-astro.png'
				altText='Lorem, ipsum dolor sit'
				imageClass='h-12 w-auto md:-left-16'
			>
				<ul class='ml-4 list-disc text-muted-foreground'>
					<li>
						Lorem, ipsum dolor sit amet consectetur adipisicing elit. Dolore debitis recusandae, ut
						molestiae laboriosam pariatur!</li>

						<li>Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, pariatur!</li>

				</ul>
			</Card>
			<Card
				heading='Lorem Ipsum'
				subheading='Sit amet consectetur'
				date='Dec 2022 - Nov 2023'
				imagePath='/src/assets/about-astro.png'
				altText='Lorem, ipsum dolor sit'
				imageClass='h-12 w-auto md:-left-16'
			/>
		</Section>

		<Section title='Projects'>
			<div class='flex flex-col gap-y-3 sm:flex-row sm:gap-x-3 sm:gap-y-0'>
				<ProjectCard
					href='https://www.google.com'
					heading='Consectetur'
					subheading='Lorem ipsum dolor sit amet consectetur adipisicing elit.'
					imagePath='/src/assets/coming-soon.png'
					altText='Example'
					class='w-full sm:w-1/2'
				/>
				<ProjectCard
					as='div'
					heading='Coming soon...'
					subheading=''
					imagePath='/src/assets/coming-soon.png'
					altText='Lorem, ipsum dolor sit'
					class='w-full sm:w-1/2'
				/>
			</div>
		</Section>

		<Section title='Certifications'>
			<Card
				as='a'
				heading='Lorem ipsum, dolor sit amet consectetur adipisicing.'
				subheading='Lorem ipsum dolor sit amet consectetur adipisicing elit. Aperiam dicta magni consequuntur corrupti.'
				date='Mar 2024 - Mar 2024'
				imagePath='/src/assets/about-astro.png'
				altText='Lorem, ipsum dolor sit'
				imageClass='h-11 w-auto md:-left-16'
				href='https://www.google.com'
			/>
			<Card
				as='a'
				heading='Lorem ipsum, dolor sit amet'
				subheading='Lorem ipsum dolor sit amet consectetur adipisicing elit. Aperiam dicta.'
				date='Mar 2029 - Mar 2032'
				imagePath='/src/assets/about-astro.png'
				altText='Lorem, ipsum dolor sit'
				imageClass='h-11 w-auto md:-left-16'
				href='https://www.google.com'
			/>
		</Section>

		<Section title='Skills'>
			<SkillLayout title='Languages' skills={languages} />
			<SkillLayout title='Frontend' skills={frontend} />
			<SkillLayout title='Backend' skills={backend} />
			<SkillLayout title='Others' skills={others} />
		</Section>
	</div>
	<a
		href='https://github.com/GHGHGHKO/resume'
		class='mt-16 flex flex-row items-center gap-x-3 rounded-3xl border border-input px-4 py-2 text-sm shadow-sm transition-all hover:shadow-md'
	>
		<span class='relative flex items-center justify-center'>
			<span
				class='absolute inline-flex h-2 w-2 animate-ping rounded-full border border-green-400 bg-green-400 opacity-75'
			></span>
			<span class='relative inline-flex h-2 w-2 rounded-full bg-green-400'></span>
		</span>

		<p class='font-medium'>Get free forked template</p>
	</a>
</PageLayout>
